# JMeter MCP Server (VS Code Taskâ€“Driven)

This repository provides a **VS Codeâ€“driven JMeter execution and analysis framework** powered by a lightweight **MCP (Model Context Protocol) server**. The entire workflow is executed via **VS Code Tasks (`Ctrl + Shift + B`)** â€” no manual CLI commands required.

The project is intentionally designed to:

* Run **existing JMX files as-is** (created from JMeter UI)
* Optionally run **JMX files with dynamic runtime parameters**
* Provide **correlation suggestions**
* Generate **HTML reports**
* Perform **basic result analysis**

---

## 1. Repository Structure

```
JMETER-MCP-SERVER/
â”‚
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ tasks.json              # All execution is driven from here
â”‚
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ analyzeResults.js       # Parses JTL & provides summary analysis
â”‚   â”œâ”€â”€ correlationEngine.js    # Detects potential dynamic values for correlation
â”‚   â”œâ”€â”€ jmxParser.js            # Parses JMX XML structure
â”‚   â”œâ”€â”€ listTests.js            # Lists available JMX tests
â”‚   â””â”€â”€ runJMeter.js            # Placeholder (will be used by MCP server for future enhancements)
â”‚
â”œâ”€â”€ jmx/                         # Place all JMeter test plans here
â”‚   â”œâ”€â”€ demoApi.jmx -- # This is plain JMX file without having dynamic parameters like- THread Group etc.
â”‚   â”œâ”€â”€ demoReqResApis.jmx
â”‚   â”œâ”€â”€ postman-echo_demo.jmx
â”‚   â”œâ”€â”€ postman-echo-complex-dynamic.jmx
â”‚   â”œâ”€â”€ postman-echo-multi-dynamic-ids.jmx
â”‚   â””â”€â”€ sample_test.jmx
â”‚
â”œâ”€â”€ reports/                     # Auto-generated JMeter reports
â”œâ”€â”€ temp/                        # Temporary execution files
â”‚
â”œâ”€â”€ .env                         # Environment configuration (JMeter path)
â”œâ”€â”€ server-mcp-full.js           # MCP Server entry point
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â””â”€â”€ README.md
```

---

## 2. Prerequisites

### Required Software

| Software      | Recommended Version  |
| ------------- | -------------------- |
| Node.js       | v18+ (LTS preferred) |
| Apache JMeter | 5.6.x                |
| VS Code       | Latest               |
| Git           | Latest               |

---

## 3. Cloning the Repository

```bash
git clone https://github.com/rahulsinha001/jmeter-mcp-server.git
cd jmeter-mcp-server
```

---

## 4. Dependency Installation

Install Node.js dependencies:

```bash
npm install
```

This installs all required Node packages used by the MCP server and handlers.

---

## 5. JMeter Installation & Configuration

### Install JMeter

* Download Apache JMeter **5.6.x**
* Extract it anywhere on your system

Example locations:

* Windows: `C:/apache-jmeter-5.6.3/`
* macOS/Linux: `/opt/apache-jmeter-5.6.3/`

### Verify JMeter

```bash
jmeter -v
```

---

## 6. Environment Configuration (`.env`)

Create a `.env` file in project root:

```env
JMETER_PATH=/path/to/apache-jmeter/bin/jmeter
PORT=4000
```

ðŸ“Œ **Important Notes:**

* Use **absolute path** to `jmeter` executable
* Do NOT commit personal paths
* Use placeholders like `/path/to/apache-jmeter/bin/jmeter`

This file **can be committed** if paths are generic.

---

## 7. VS Code Tasks â€“ How Everything Runs

This project does **NOT require manual CLI execution**.

All actions are executed via:

```text
Ctrl + Shift + B
```

You will see a list of tasks such as:

* Start MCP Server
* Run JMeter via MCP (with dynamic runtime parameters)
* Run JMeter (As-Is)
* List all JMX files
* Analyze Results
* Analyze last run automatically
* Open HTML Report
* Get Correlation Suggestions
* Clear all JMeter Reports

---

## 8. Running JMeter â€“ Two Supported Modes

### ðŸ”¹ Option 1: Run JMX As-Is (Recommended for UI-created tests)

Use this when:

* JMX already has thread group settings
* Load model is defined in JMeter UI

Flow:

1. Press `Ctrl + Shift + B`
2. Select **Run JMeter (As-Is)**
3. Enter JMX file name

âž¡ JMeter runs exactly as defined in the JMX.

---

### ðŸ”¹ Option 2: Run JMX With Dynamic Parameters

Use this when:

* You want runtime control without editing JMX
* JMX supports JMeter properties

Required JMX fields:

```
Threads:   ${__P(users,1)}
Ramp-Up:  ${__P(rampUp,1)}
Duration: ${__P(duration,60)}
```

Flow:

1. Press `Ctrl + Shift + B`
2. Select **Run JMeter via MCP (Dynamic)**
3. Provide:

   * users
   * rampUp
   * duration

âž¡ Parameters are passed using `-J` properties.

---

## 9. MCP Server (`server-mcp-full.js`)

### Responsibilities

* Starts HTTP server (default port 4000)
* Receives run requests from VS Code tasks
* Executes JMeter using Node
* Generates:

  * JTL files
  * HTML reports

You start it using:

```
Ctrl + Shift + B â†’ Start MCP Server
```

---

## 10. Handlers â€“ What Each File Does

### `runJMeter.js`

* Builds JMeter command
* Handles both execution modes
* Writes results to `/reports`

### `jmxParser.js`

* Reads JMX XML
* Extracts samplers and parameters
* Used by correlation engine

### `correlationEngine.js`

* Scans request paths, parameters, bodies
* Detects potential dynamic values
* Returns **suggestions only** (no auto-modification)

### `analyzeResults.js`

* Parses JTL files
* Computes basic metrics
* Used by analysis tasks

---

## 11. Correlation Suggestions

Run via:

```
Ctrl + Shift + B â†’ Get Correlation Suggestions
```

This:

* Does NOT change JMX
* Provides insight similar to LoadRunner correlation hints

---

## 12. Reports

* JTL + HTML reports stored under:

```
/reports/<runId>/
```

Open latest report:

```
Ctrl + Shift + B â†’ Open last generated HTML report
```

---

## 13. Adding New JMX Tests

1. Create test in JMeter UI
2. Save `.jmx`
3. Copy to `jmx/` folder
4. Run using VS Code tasks

No code changes required.

---

## 14. Current Implementation Scope

âœ” JMX execution
âœ” Dynamic parameter support
âœ” Correlation suggestions
âœ” Result analysis
âœ” HTML report generation
âœ” VS Code taskâ€“driven UX

---

## 15. Future Enhancements (Planned)

* Auto-injection of runtime parameters into JMX
* Smarter correlation classification
* Distributed execution support
* GenAI-assisted test insights
* Advanced performance trend analysis

---

## 16. Team Onboarding (Quick Checklist)

1. Clone repo
2. Install Node.js + JMeter
3. Configure `.env`
4. Run `npm install`
5. Open VS Code
6. Press `Ctrl + Shift + B`
7. Select desired task

---

## 17. Final Notes

* This framework **does not replace JMeter UI**
* It complements it with **repeatable execution & automation**

---

Happy Testing ðŸš€
